<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.amis.dao.UserDao" >

    <select id="findByPhone" resultType="com.amis.entity.Users">
        SELECT
            u_id,
            u_name,
            u_gender,
            u_phone,
            u_picture,
            coach_teaching_age,
            coach_title,
            tc_id,
            u_role
        FROM t_user
        WHERE u_phone = #{u_phone}
    </select>

    <select id="login" resultType="com.amis.entity.Users">
        SELECT
            u_id,
            u_name,
            u_gender,
            u_phone,
            u_picture,
            coach_teaching_age,
            coach_title,
            tc_id,
            u_role
        FROM t_user
        WHERE u_phone = #{u_phone}
    </select>

    <select id="cplogin" resultType="com.amis.entity.Users">
            SELECT
              u_id,
              u_name,
              u_gender,
              u_phone,
              u_picture,
              coach_teaching_age,
              coach_title,
              tc_id,
              u_role
            FROM t_user
            WHERE u_phone = #{u_phone} AND u_password = #{u_password}
    </select>


    <insert id="register" >
        insert into  t_user(
          u_name,
          u_gender,
          u_phone,
          u_password,
          u_picture,
          u_role)
        values (
          #{u_name},
          #{u_gender},
          #{u_phone},
          #{u_password},
          #{u_picture},
          #{u_role})
    </insert>

    <update id="updateUser">
        UPDATE t_user
        <set>
            <if test="u_name != null and u_name != ''">
                    u_name = #{u_name},
            </if>
            <if test="u_gender != null and u_gender != ''">
                u_name = #{u_name},
            </if>
            <if test="u_name != null and u_name != ''">
                u_name = #{u_name}
            </if>

        </set>
        <where>
            id = #{id}
        </where>
    </update>

</mapper>