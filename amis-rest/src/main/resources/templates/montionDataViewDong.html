<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
<div id="container" style="height: 50%"></div>
<div id="lous" style="height: 50%">

    <input type="button" value="确认" class="submitBtn" onclick="shiShiGetData()"/>
</div>
<script type="text/javascript" src="/js/echarts.min.js" ></script>
<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript">

    var c=0;
    var data = [];
    var dom = document.getElementById("container");
    var myChart = echarts.init(dom);
    option = null;

    var value =  100;

    //设置固定数据，技术循环500次，往数据里添加500条数据
    for (var i = 0; i < 500; i++) {
        data.push(randomDatas());
    }

    //设置固定数据
    function randomDatas() {
        return {
            name: 200,
            value: [
                c++,
                50
            ]
        }
    }

    //设置返回对象，封装数据
    function randomData(montionSpr) {
        value =Math.random() * 21 - 10;
        return {
            name: value,
            value: [
                c++,
                montionSpr
            ]
        }
    }


    setInterval(function () {
        var resultax = [];
        $.ajax({
            type : "post",
            async : true,            //异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）
            url : "/montion/getMontionDataTable",    //请求发送到dataActiont处
            data : {},
            dataType : "json",        //返回数据形式为json
            success : function(result) {
                resultax = result[0];
                for (var i = 0; i < resultax.length; i++) {
                        (function(j) {
                            setTimeout( function timer() {
                                data.shift();
                                data.push(randomData(resultax[j]));
                                myChart.setOption({
                                    series: [{
                                        data: data
                                    }]
                                });
                        }, j*60 );
                    })(i);
                }
            }
        });
    }, 1000);;

    //echarts数据view
    option = {
        title: {
            text: '动态数据 + 时间坐标轴'
        },
        tooltip: {
            trigger: 'axis',
            formatter: function (params) {
                params = params[0];
                return params.value[1];
            },
            axisPointer: {
                animation: false
            }
        },
        xAxis: {
            type: 'time',
            splitLine: {
                show: false
            }

        },
        yAxis: {
            type: 'value',
            boundaryGap: [0, '100%'],
            splitLine: {
                show: false
            }
        },
        series: [{
            name: '模拟数据',
            type: 'line',
            showSymbol: false,
            hoverAnimation: false,
            data: data
        }]
    };


    if (option && typeof option === "object") {
        myChart.setOption(option, true);
    }

</script>
</body>
</html>